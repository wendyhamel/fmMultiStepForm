<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">
  
  <title>Frontend Mentor | Multi-step form</title>

  <!--  font  -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;500;700&display=swap" rel="stylesheet">

  <!-- Tailwind play cdn -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="src/tailwind.config.js"></script>

  <!-- Alpine Plugins -->
  <script defer src="https://unpkg.com/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>

  <!-- Alpine Core -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

</head>
<body class="bg-magnolia antialiased">
<main class="min-h-screen">
  <section
      x-data="multiSteps()"
      class="min-h-screen flex flex-col"
  >
  <!-- Sidebar start -->
    <section class="relative">
      <div class="absolute inset-x-0 max-h-[11rem] overflow-hidden">
        <img class="w-full object-cover object-bottom sm:hidden" src="./assets/images/bg-sidebar-mobile.svg" alt="colorful background">
        <img class="hidden sm:block" src="./assets/images/bg-sidebar-desktop.svg" alt="colorful background">
      </div>
      <ol class="mt-8 mb-9 mx-auto relative flex justify-center gap-4">
        <template x-for="step in steps" :key="step.id">
          <li class="flex">
            <div
                class="rounded-full w-8 h-8 grid place-items-center border border-blue-pastel text-xs font-bold"
                :class="currentStep === step.id ? 'bg-blue-light text-blue-marine' : 'text-white'"
            >
              <span x-text="step.id"></span>
            </div>
            <div class="hidden md:block">
              <span>Step <span x-text="step.id"></span></span>
              <h3 x-text="step.title"></h3>
            </div>
          </li>
        </template>
      </ol>

    </section>
  <!-- Sidebar end -->
  <!-- Steps content -->

    <form
        class="relative grow flex flex-col justify-between"
        method="post"
        x-init="
            $watch('name', value => { validate('name')})
            $watch('email', value => { validate('email')})
            $watch('phone', value => { validate('phone')})
        "
    >

      <section class="mx-4 rounded-lg bg-white shadow-lg shadow-gray-light px-6 pt-7 pb-8">
        <!-- Step 1 start -->
        <section x-show="currentStep === 1">
          <div class="space-y-2 mb-5">
            <h2 class="text-2xl font-bold text-blue-marine">Personal info</h2>
            <p class="text-gray-cool">Please provide your name, email address, and phone number.</p>
          </div>

          <div class="space-y-4">
            <div>
              <span>
                <label for="name" class="block text-xs text-blue-marine">
                  Name
                </label>
                <span class="text-red-strawberry" x-text="validation.name.message"></span>
              </span>
              <input
                  id="name"
                  x-model="name"
                  type="text"
                  class="mt-0.5 block w-full rounded px-3.5 py-2.5 border border-gray-light text-sm text-gray-cool tracking-wider focus:border-indigo-500 focus:ring-indigo-500 placeholder:font-medium"
                  placeholder="e.g. Stephen King"
                  required
              >
            </div>

            <div>
             <span>
                <label for="email" class="block text-xs text-blue-marine">
                Email Address
              </label>
              <span class="text-red-strawberry" x-text="validation.email.message"></span>
             </span>
              <input
                  id="email"
                  x-model="email"
                  type="text"
                  class="mt-0.5 block w-full rounded px-3.5 py-2.5 border border-gray-light text-sm text-gray-cool tracking-wider focus:border-indigo-500 focus:ring-indigo-500 placeholder:font-medium"
                  placeholder="e.g. stephenking@lorem.com"
                  required
              >
            </div>

            <div>
              <span>
                <label for="phone" class="block text-xs text-blue-marine">
                  Phone Number
                </label>
                <span class="text-red-strawberry" x-text="validation.phone.message"></span>
              </span>
              <input
                  id="phone"
                  x-model="phone"
                  type="text"
                  class="mt-0.5 block w-full rounded px-3.5 py-2.5 border border-gray-light text-sm text-gray-cool tracking-wider focus:border-indigo-500 focus:ring-indigo-500 placeholder:font-medium"
                  placeholder="e.g. +1 234 567 890"
                  required
              >
            </div>
          </div>

        </section>
        <!-- Step 1 end -->

        <!-- Step 2 start -->
        <section x-show="currentStep === 2" class="space-y-2">
          <fieldset>
            <legend><h2 class="text-2xl font-bold text-blue-marine">Select your plan</h2></legend>

            <p class="text-gray-cool">You have the option of monthly or yearly billing.</p>

            <div class="mt-4 grid grid-cols-1 gap-y-6 sm:grid-cols-3 sm:gap-x-4">
              <template x-for="plan in plans">
                <label class="relative flex cursor-pointer rounded-lg border bg-white p-4 shadow-sm focus:outline-none">
                  <input type="radio" :value="plan.id" x-model="selectedPlan" class="sr-only" @input="selectedPlan = plan.id" :aria-labelledby="plan.name" :aria-describedby="plan.name + ' ' + plan.priceMonthly + ' a month or ' + plan.priceYearly + ' a year with ' + plan.yearlyDiscountDetails">
                  <span class="flex flex-1">
                    <span class="flex flex-col">
                      <span>
                        <img :src="plan.iconPath" :alt="plan.altText">
                      </span>
                      <span class="block text-sm font-medium text-gray-900" x-text="plan.name"></span>
                      <span>&dollar;<span class="mt-1 flex items-center text-sm text-gray-500" x-text="billingYearly ? plan.priceYearly + '/yr' : plan.priceMonthly + '/mo'"></span>
                      </span>
                      <span class="mt-6 text-sm font-medium text-gray-900" x-show="billingYearly" x-text="plan.yearlyDiscountDetails"></span>
                    </span>
                  </span>
                </label>
              </template>
            </div>
          </fieldset>

          <div class="flex items-center gap-4">
            <span :class="!billingYearly ? 'text-sm font-medium text-gray-900' : 'text-sm text-gray-500'">Monthly</span>
            <button @click="billingYearly = !billingYearly" type="button" class="bg-blue-marine relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-4 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-purple" role="switch" aria-checked="false" aria-labelledby="annual-billing-label">
              <span aria-hidden="true" :class="billingYearly ? 'translate-x-5' : 'translate-x-0'" class="pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"></span>
            </button>
            <span :class="billingYearly ? 'text-sm font-medium text-gray-900' : 'text-sm text-gray-500'">Yearly</span>
          </div>

        </section>
        <!-- Step 2 end -->

        <!-- Step 3 start -->
        <section x-show="currentStep === 3" class="space-y-2">

        <h2 class="text-2xl font-bold text-blue-marine">Pick add-ons</h2>
        <p class="text-gray-cool">Add-ons help enhance your gaming experience.</p>

          <fieldset class="space-y-5">
            <legend class="sr-only">Notifications</legend>
            <template x-for="item in addons">
              <div class="relative flex items-center justify-between gap-4 p-2 border border-gray-light">
                <div class="flex h-5 items-center">
                  <input :value="item.id" x-model="selectedAddons" :aria-describedby="item.details" type="checkbox" class="h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500">
                </div>
                <div class="flex-grow text-sm">
                  <label class="font-medium text-gray-700" x-text="item.name"></label>
                  <p id="comments-description" class="text-gray-500" x-text="item.details"></p>
                </div>
                <span>+&dollar;<span x-text="billingYearly ? item.priceYearly + '/yr' : item.priceMonthly + '/mo'"></span></span>
              </div>
            </template>
          </fieldset>

        </section>
        <!-- Step 3 end -->

        <!-- Step 4 start -->
        <section x-show="currentStep === 4" class="space-y-2">

          <h2 class="text-2xl font-bold text-blue-marine">Finishing up</h2>
          <p class="text-gray-cool">Double-check everything looks OK before confirming.</p>

          <div>
            <div>
              <span>
                <span x-text="order.plan.name"></span> (<span x-text=" billingYearly ? 'Yearly' : 'Monthly'"></span>)
              </span>
              <span x-text="billingYearly ? order.plan.priceYearly + '/yr' : order.plan.priceMonthly + '/mo'"></span>
              <button type="button" @click="currentStep = 2">Change</button>
            </div>
            <template x-for="item in getOrderedAddons(order.addons)">
              <div>
                <span x-text="item.name"></span>
                <span x-text="billingYearly ? item.priceYearly + '/yr' : item.priceMonthly + '/mo'"></span>
              </div>
            </template>
          </div>

          <span>Total (per <span x-text=" billingYearly ? ' year' : ' month'"></span>)</span>
          <span x-text="billingYearly ? total() + '/yr' : total() + '/mo'"></span>

        </section>
        <!-- Step 4 end -->

        <!-- Step 5 start -->
        <section x-show="currentStep === 'finished'" class="space-y-2">

          <h2 class="text-2xl font-bold text-blue-marine">Thank you!</h2>

          <p class="text-gray-cool">Thanks for confirming your subscription! We hope you have fun
          using our platform. If you ever need support, please feel free
          to email us at support@loremgaming.com.</p>

        </section>
       <!-- Step 5 end -->
      </section>
      <section class="fixed bottom-0 inset-x-0 flex justify-between bg-white p-4">
        <button
                x-show="currentStep > 1 && currentStep < 5"
                type="button"
                @click="currentStep--"
                x-text="'Go Back'"
        ></button>
        <button
                x-show="currentStep === 1"
                type="button"
                @click="validate('name'); validate('email'); validate('phone'); nextStep()"
                class="ml-auto bg-blue-marine text-white text-sm py-2.5 px-4 rounded flex items-center justify-center hover:bg-blue-marine/90"
                x-text="'Next Step'"
        ></button>
        <button
                x-show="currentStep > 1 && currentStep < 5"
                type="button"
                @click="nextStep()" x-text="currentStep === 4 ? 'Confirm' : 'Next Step'"
                class="bg-blue-marine text-white text-sm py-2.5 px-4 rounded flex items-center justify-center hover:bg-blue-marine/90"
        ></button>
      </section>
    </form>
  <!-- Steps content end -->
  </section>
</main>

  <footer class="fixed bottom-0 inset-x-0 text-center text-xs text-black bg-white/80 py-1 opacity-0 translate-y-2 hover:opacity-100 hover:translate-y-0 transform transition ease-in-out duration-150">
    Challenge by <a class="hover:underline" href="https://www.frontendmentor.io/challenges/multistep-form-YVAnSdqQBJ" target="_blank">Frontend Mentor</a>.
    Coded by <a class="hover:underline" href="https://www.frontendmentor.io/profile/wendyhamel" target="_blank">Wendy Hamel</a>.
  </footer>
  <script src="src/stepsForm.js"></script>
</body>
</html>
